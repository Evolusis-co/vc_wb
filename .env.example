# =============================================================================
# VoiceCoach Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# =============================================================================
# SHARED CONFIGURATION (Both Services)
# =============================================================================

# OpenAI API Key (required for both services)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Environment Mode
ENVIRONMENT=development  # development, staging, production

# =============================================================================
# VOICECOACH API (FastAPI) - Port 8000
# =============================================================================

# Secret key for JWT tokens (generate with: python -c "import secrets; print(secrets.token_urlsafe(32))")
SECRET_KEY=your-super-secret-key-min-32-chars

# ElevenLabs API for voice synthesis (optional - falls back to OpenAI TTS)
ELEVENLABS_API_KEY=your-elevenlabs-api-key

# Database Configuration
# Local development (SQLite)
DATABASE_URL=sqlite:///./voicecoach.db

# Production (PostgreSQL - Render auto-provides this)
# DATABASE_URL=postgresql://user:password@host:5432/dbname

# CORS - Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8000,http://127.0.0.1:8000

# JWT Token Expiration (in minutes)
ACCESS_TOKEN_EXPIRE_MINUTES=1440  # 24 hours

# Feature Flags
ENABLE_RABBITMQ=false          # Set to true if using RabbitMQ for queuing
ENABLE_VAD=true                # Voice Activity Detection
ENABLE_AUGMENTATION=true       # Audio augmentation for better transcription

# RabbitMQ (optional - only if ENABLE_RABBITMQ=true)
# RABBITMQ_URL=amqp://guest:guest@localhost/

# =============================================================================
# WEB CHATBOT (Flask) - Port 5001
# =============================================================================

# Flask Secret Key
FLASK_SECRET_KEY=your-flask-secret-key-here

# JWT Secret Key for Chatbot (should be different from VoiceCoach SECRET_KEY)
JWT_SECRET_KEY=your-jwt-secret-for-chatbot

# Flask Debug Mode (set to False in production)
FLASK_DEBUG=True
FLASK_ENV=development

# Qdrant Vector Database (required for chatbot RAG)
QDRANT_URL=https://your-cluster.qdrant.io
QDRANT_API_KEY=your-qdrant-api-key

# Database Configuration for Chatbot
# Local development (SQLite)
DATABASE_URL=sqlite:///./chatbot.db

# Production (PostgreSQL)
# DATABASE_URL=postgresql://user:password@host:5432/chatbot_db

# CORS - Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5001

# Auth Service Integration (optional)
# If set, chatbot will forward auth requests to VoiceCoach API
# Leave empty to use independent authentication
AUTH_SERVICE_URL=

# For production (if using shared auth):
# AUTH_SERVICE_URL=https://voicecoach-api.onrender.com

# =============================================================================
# RENDER DEPLOYMENT (Production)
# =============================================================================

# When deploying to Render, set these in the Render Dashboard:
# 
# VoiceCoach API Service:
# - OPENAI_API_KEY
# - SECRET_KEY (auto-generate in Render)
# - ELEVENLABS_API_KEY
# - DATABASE_URL (auto-provided by Render PostgreSQL)
# - ALLOWED_ORIGINS=https://voicecoach-chatbot.onrender.com,https://voicecoach-api.onrender.com
# - ENVIRONMENT=production
# - ACCESS_TOKEN_EXPIRE_MINUTES=1440
#
# Web Chatbot Service:
# - OPENAI_API_KEY
# - FLASK_SECRET_KEY (auto-generate in Render)
# - JWT_SECRET_KEY (auto-generate in Render)
# - QDRANT_URL
# - QDRANT_API_KEY
# - DATABASE_URL (auto-provided by Render PostgreSQL)
# - CORS_ORIGINS=https://voicecoach-web.onrender.com,https://voicecoach-chatbot.onrender.com
# - AUTH_SERVICE_URL=https://voicecoach-api.onrender.com (optional)
# - FLASK_ENV=production
# - FLASK_DEBUG=False

# =============================================================================
# LOCAL DEVELOPMENT QUICK START
# =============================================================================

# 1. Copy this file:
#    cp .env.example .env
#
# 2. Fill in required values:
#    - OPENAI_API_KEY (get from https://platform.openai.com)
#    - SECRET_KEY (generate secure random string)
#    - FLASK_SECRET_KEY (generate secure random string)
#    - JWT_SECRET_KEY (generate secure random string)
#    - QDRANT_URL and QDRANT_API_KEY (get from https://cloud.qdrant.io)
#
# 3. Start VoiceCoach API:
#    python -m uvicorn server:app --host 0.0.0.0 --port 8000 --reload
#
# 4. Start Web Chatbot:
#    python web_chatbot-main/app.py
#
# 5. Access:
#    VoiceCoach: http://localhost:8000
#    Chatbot: http://localhost:5001

# =============================================================================
# SECURITY NOTES
# =============================================================================

# ⚠️  IMPORTANT SECURITY PRACTICES:
# 
# 1. Never commit .env to version control
# 2. Use different SECRET_KEY for each environment
# 3. Rotate keys regularly in production
# 4. Use strong, randomly generated keys (min 32 characters)
# 5. Enable HTTPS in production (Render does this automatically)
# 6. Restrict CORS origins to trusted domains only
# 7. Use environment-specific API keys
# 8. Monitor API usage and set rate limits
# 9. Enable database backups in production
# 10. Use Render's secret management (don't put secrets in render.yaml)

# Generate secure keys with:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
